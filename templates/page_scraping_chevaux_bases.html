{% extends "core.html" %}

{% block css %}
    <link rel="stylesheet" href="{{ url_for('static', filename='css/checkBox.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/loadingModal.css') }}">
    <style>
        /* Style du cadre en bas */
        .result-console {
            border: 1px solid #ccc;
            padding: 10px;
            margin-top: 20px;
            height: 200px; /* Ajustez la hauteur selon vos besoins */
            overflow-y: auto; /* Ajoutez une barre de défilement si nécessaire */
        }
    </style> 
{% endblock %}

{% block header %}
    <h1>Scraping du site des Haras de France</h1>
{% endblock %}

{% block content %}
    <h2>Choisissez une année à scraper</h2>

    <form action="/scraping_chevaux_bases" method="post">
        <div class="year-checkbox">
            {% for annee in list_annees %}
                <label>
                    <input type="checkbox" name="annees[]" value="{{ annee }}"> {{ annee }}
                </label>
            {% endfor %}
        </div>
        
        <button type="submit" name="action" value="infos">Afficher le temps de scraping</button>
        <button type="submit" name="action" value="scraping">Lancer le scraping</button> 
    </form>

    

    <!-- Cadre pour afficher le résultat -->
    <div class="result-console">
        <!-- Affichez ici le résultat -->
        {% if heures is defined and minutes is defined and secondes is defined and nombre_chevaux is defined and nombre_pages is defined %}
            <p>Pour l(es) année(s) {% for i in annees %}{{ i }}, {% endfor %}</p>
            <p>Il y a {{ nombre_chevaux }} chevaux à scraper</p>
            <p>Réparti en {{ nombre_pages }} pages</p>
            <p>Temps total estimé pour le scraping (pour 5.5s par page de 100 articles) : {{ heures }} heures {{ minutes }} minutes {{ secondes }} secondes</p>
        {% endif %}

        {% if heures_duration is defined and minutes_duration is defined and secondes_duration is defined %}
            <p>Le fichier a été enregistrer dans  {{ fichier_csv }}</p>
            <p>Temps total estimé pour le scraping (pour 5.5s par page de 100 articles) : {{ heures }} heures {{ minutes }} minutes {{ secondes }} secondes</p>
            <p>Temps total réel pour le scraping : {{ heures_duration }} heures {{ minutes_duration }} minutes {{ secondes_duration }} secondes</p>
        {% endif %}
    </div>
    <!------------------------------------->



    <a href="/"><button>Retour</button></a>



    <!-- Modal -->
    <div id="loadingModal" class="modal" style="display: none;">
        <div class="modal-content">
            <div class="loader"></div>
            <p style="z-index: 100; color: #000;">Chargement...</p>
        </div>
    </div>
    <!----------->

    
{% endblock %}

{% block footer %}
    <script src="{{ url_for('static', filename='js/loading.js') }}"></script> 
{% endblock %}


